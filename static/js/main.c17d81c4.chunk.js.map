{"version":3,"sources":["Styles.js","TabContainer.js","DataTable.js","QueryForm.js","Widget.js","App.js","reportWebVitals.js","appSpec.js","data.js","index.js"],"names":["useStyles","makeStyles","theme","root","margin","spacing","width","flexgrow","backgroundColor","palette","background","paper","formControl","minWidth","selectEmpty","marginTop","padding","textAlign","color","text","secondary","customOne","flexGrow","fontFamily","customTwo","fontSize","TabPanel","props","children","value","index","other","role","hidden","id","Box","p","Typography","component","TabContainer","args","classes","console","log","className","AppBar","position","style","Tabs","state","onChange","variant","scrollButtons","tabs","map","tab","Tab","label","idx","widgets","spec","Widget","wspec","callbacks","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","DataTable","icons","title","data","dataref","columns","colspecs","length","cols","options","QueryForm","noValidate","autoComplete","widget","type","Grid","item","xs","event","newValue","handleTabChange","updateData","TextField","handleTextChange","FormControl","InputLabel","Select","labelId","handleSelectChange","MenuItem","values","v","display","Button","trigger","onClick","handleClick","container","justifyContent","justify","alignItems","alt","border","height","src","dangerouslySetInnerHTML","__html","client","ApolloClient","uri","cache","InMemoryCache","fetchOptions","mode","data_query","gql","accumulateStateEntry","backend","endpoint","query","genStateStruct","cur_state","reduce","sleep","ms","Promise","resolve","setTimeout","zip","vals","obj","i","updateState","a","url","hdr","Headers","append","method","headers","body","resp","fetch","json","get_options","nextUri","replace","stats","col","name","result","row","field","App","state0","state1","staging","this","fetch_on_init","runUrlFetchQuery","target","setState","frag","qid","prestoFetch","push","from","vars","JSON","stringify","variables","then","parse","getData","colstr","response","Object","keys","x","extractColumnSpec","runPrestoQuery","runNativeQuery","runConstantQuery","d","c","maxWidth","direction","alignContent","ApolloProvider","generateWidget","PureComponent","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","app_spec","render","rowData","href","pdf","download","search","paging","filtering","exportButton","maxBodyHeight","tableLayout","defaultGroupOrder","grouping","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c17d81c4.chunk.js","sourcesContent":["import { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => (\n{\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(1),\n      width: \"25ch\",\n    },\n    flexgrow: 1,\n    backgroundColor: theme.palette.background.paper,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  customOne: {\n    padding: '3rem 15rem',\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n    fontFamily: 'Open Sans',\n  },\n  customTwo: {\n    padding: '0rem',\n    color: '#484848',\n    backgroundColor: '#bbbbbb',\n    fontFamily: 'Open Sans',\n    fontSize: '1rem',\n  },\n}\n));\n\nexport { useStyles };\n","// for tab containers\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\n\nimport { useStyles } from \"./Styles.js\";\nimport { Widget } from \"./Widget.js\";\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box p={3}>\n          <Typography component={'span'} >{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nfunction TabContainer(args) {\n  const classes = useStyles();\n//  const [value, setValue] = React.useState(0);\n\n//  const handleChange = (event, newValue) => {\n//    setValue(newValue);\n//  };\n  console.log(\"tabcontainer args.id = \" + args.id);\n\n  return (\n    <div className={classes.root} >\n      <AppBar key={\"appbar-\"+args.id} position=\"static\" style={{ minWidth: \"100%\" }}>\n        <Tabs key={\"tabs-\"+args.id} value={args.state[args.id].value} onChange={args.onChange} \n            aria-label=\"simple tabs example\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            className={classes.customTwo}\n            >\n          { args.tabs.map( (tab) =>  \n                (<Tab key={\"tab-\" + tab.id} label={tab.label} {...a11yProps(tab.idx)} />)) }\n        </Tabs>\n      </AppBar>\n      { args.tabs.map( (tab) =>  \n                (<TabPanel key={\"tabpanel-\"+tab.id} value={args.state[args.id].value} index={tab.idx} style={{ minWidth: \"100%\" }}>\n                    { tab.widgets.map( (spec) => (<Widget wspec={spec} callbacks={args.callbacks} state={args.state} />) ) }\n                </TabPanel>\n                )) }\n    </div>\n  );\n}\n\nexport { TabContainer };\n","import { forwardRef } from \"react\";\nimport MaterialTable from \"material-table\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport ArrowDownward from \"@material-ui/icons/ArrowDownward\";\nimport Check from \"@material-ui/icons/Check\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport Search from \"@material-ui/icons/Search\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\nfunction DataTable(args) {\n  //console.log(args.state[args.id]);\n  return (\n      <MaterialTable\n        icons={tableIcons}\n        title={args.label}\n        data={args.state[args.state[args.id].dataref].data}\n        columns={args.state[args.id].colspecs.length>0 ? args.state[args.id].colspecs : args.state[args.state[args.id].dataref].cols} \n        options={args.state[args.id].options}\n      />\n  );\n}\n//    <div style={{ maxWidth: \"100%\" }}>\n//    </div>\n\n\n\nexport { DataTable };\n","import { Widget } from \"./Widget.js\";\nimport { useStyles } from \"./Styles.js\";\n\nfunction QueryForm(args) {\n  const classes = useStyles();\n  return (\n    <form className={classes.root} noValidate autoComplete=\"off\">\n      {args.widgets.map((spec) =>\n        (<Widget wspec={spec} callbacks={args.callbacks} state={args.state} widgets={args.widget}/>)\n      )} \n    </form>\n  );\n}\n\nexport { QueryForm };\n","import Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport { TabContainer } from \"./TabContainer.js\";\nimport { DataTable } from \"./DataTable.js\";\nimport { QueryForm } from \"./QueryForm.js\";\nimport { useStyles } from \"./Styles.js\";\n\nimport TextField from \"@material-ui/core/TextField\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n//import FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport Button from \"@material-ui/core/Button\";\n\n// Grid will use 12 units has maxwidth\nfunction Widget(args) {\n  const classes = useStyles();\n  switch (args.wspec.type) {\n    case \"tabcontainer\":\n      return (\n        <Grid item xs={12}>\n          <TabContainer\n            key={args.wspec.id}\n            id={args.wspec.id}\n            callbacks={args.callbacks}\n            state={args.state}\n            tabs={args.wspec.tabs}\n            onChange={(event, newValue) => args.callbacks.handleTabChange(args.wspec.id, event, newValue)}\n          />\n        </Grid>\n      );\n    case \"form\":\n      return (\n        <Grid item xs={12}>\n          <QueryForm\n            key={args.wspec.id}\n            callbacks={args.callbacks}\n            state={args.state}\n            widgets={args.wspec.widgets}\n          />\n        </Grid>\n      );\n    case \"table\":\n      return (\n        <Grid item xs={12}>\n          <DataTable\n            key={args.wspec.id}\n            id={args.wspec.id}\n            label={args.wspec.label}\n            state={args.state}\n            updateData={args.callbacks.updateData}\n          />\n        </Grid>\n      );\n    case \"text_input\":\n      return (\n        <TextField\n          key={args.wspec.id}\n          state={args.state}\n          id=\"queryinput\"\n          label={args.wspec.label}\n          onChange={(event) => args.callbacks.handleTextChange(args.wspec.id, event)}\n          variant=\"outlined\"\n        />\n      );\n    case \"menu\":\n      return (\n        <FormControl\n          key={args.wspec.id}\n          state={args.state}\n          variant=\"filled\"\n          className={classes.formControl}\n        >\n          <InputLabel id=\"demo-simple-select-filled-label\">\n            {args.wspec.label}\n          </InputLabel>\n          <Select\n            labelId=\"demo-simple-select-filled-label\"\n            id=\"qtypedropdown\"\n            value={args.state[args.wspec.id].value}\n            onChange={(event) => args.callbacks.handleSelectChange(args.wspec.id, event)}\n          >\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            {args.wspec.values.map((v) => {\n              return (\n                <MenuItem key={v.id} value={v.value}>\n                  {v.display}\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </FormControl>\n      );\n    case \"button\":\n      return (\n        <Button\n          key={args.wspec.id}\n          state={args.state}\n          id={args.wspec.id}\n          trigger={args.wspec.trigger}\n          variant=\"contained\"\n          onClick={() => args.callbacks.handleClick(args.wspec.id)}\n        >\n          {args.wspec.label}\n        </Button>\n      );\n    case \"image\":\n      return (\n        <Grid container xs={args.wspec.width} \n            justifyContent={args.wspec.justify}\n            alignItems=\"center\"\n            >\n          <Grid item xs={args.wspec.width}>\n            <img alt=\"portrait\" border=\"1\" style={{\n                \"marginTop\": \"2em\", \n                    height: \"220px\"}} \n                src={args.wspec.value}/>\n          </Grid >\n        </Grid >\n      );\n    case \"text\":\n      return (\n        <Grid container xs={args.wspec.width} \n            justifyContent={args.wspec.justify}\n            >\n          <Grid item xs={args.wspec.width}>\n            <div key={args.wspec.id} dangerouslySetInnerHTML={{__html: args.wspec.value}}/>\n          </Grid >\n        </Grid >\n      );\n//          <Paper className={classes.paper}>\n//          </Paper>\n    default:\n      return null;\n  }\n}\n\nexport { Widget } ;\n","import \"./App.css\";\n\nimport React from 'react';\nimport { Widget } from './Widget.js';\nimport { ApolloClient, InMemoryCache, useQuery, gql } from \"@apollo/client\";\nimport { ApolloProvider } from \"@apollo/client/react\";\nimport { PureComponent, Component, forwardRef } from \"react\";\nimport Grid from '@material-ui/core/Grid';\n\nconst client = new ApolloClient({\n  uri: \"http://127.0.0.1:4000/graphql\",\n  cache: new InMemoryCache(),\n  fetchOptions: {\n    mode: \"no-cors\",\n  },\n});\nconst data_query = gql`\n  query GetData($endpoint: String!, $query: String!, $args: String) {\n    getData(endpoint: $endpoint, query: $query, args: $args) {\n      data\n      colstr\n      columns {\n        title\n        field\n      }\n    }\n  }\n`;\nfunction accumulateStateEntry(state, wspec) {\n  switch (wspec.type) {\n    case \"table\":\n      state[wspec.id] = {\n        dataref: wspec.dataref,\n        cols: [],\n        colspecs: wspec.colspecs,\n        options: wspec.options\n      };\n      break;\n    case \"query\":\n      state[wspec.id] = {\n        data: [],\n        cols: [],\n        backend: wspec.backend,\n        endpoint: wspec.endpoint,\n        query: wspec.query,\n        args: wspec.args,\n      };\n      if (wspec.backend === \"constant\") {\n        state[wspec.id].data = wspec.query.data;\n        state[wspec.id].cols = wspec.query.cols;\n      }\n      break;\n    case \"text_input\":\n    case \"menu\":\n      state[wspec.id] = { value: \"\" };\n      break;\n    case \"button\":\n      state[wspec.id] = { value: \"\", trigger: wspec.trigger };\n      break;\n    case \"image\":\n    case \"text\":\n      state[wspec.id] = { value: wspec.value };\n      break;\n    case \"form\":\n      genStateStruct(state, wspec.widgets);\n      break;\n    case \"tabcontainer\":\n      state[wspec.id] = { value: 0 };\n      wspec.tabs.map( (tab) => genStateStruct(state, tab.widgets) );\n      break;\n    default:\n      break;\n  }\n  return state;\n}\n\nfunction genStateStruct(cur_state, widgets) {\n  return widgets.reduce(accumulateStateEntry, cur_state);\n}\n\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nfunction zip(cols, vals) {\n  const obj = {};\n  for (var i = 0; i < cols.length; i++) {\n    obj[cols[i]] = vals[i];\n  }\n  return obj;\n}\n\nasync function prestoFetch(query, updateState) {\n  // uri needs to be fudged for nginx proxy\n  const url = \"http://localhost:5000/presto/v1/statement\";\n  const hdr = new Headers();\n  hdr.append(\"Content-Type\", \"text/plain\");\n  hdr.append(\"Access-Control-Allow-Origin\", \"*\");\n  hdr.append(\"X-Presto-User\", \"l002\");\n\n  const options = {\n    method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n    //mode: 'no-cors', // no-cors, *cors, same-origin\n    headers: hdr,\n    body: query, // body data type must match \"Content-Type\" header\n  };\n  console.log(url);\n  console.log(options);\n  var resp = {};\n  try {\n    resp = await (await fetch(url, options)).json();\n  } catch (e) {\n    console.log(e);\n  }\n\n  console.log(resp);\n\n  const get_options = {\n    method: \"GET\", // *GET, POST, PUT, DELETE, etc.\n    headers: hdr,\n  };\n\n  // hack to handle nginx proxy\n  const nextUri = resp.nextUri.replace(\":8080/\", \":5000/presto/\");\n\n  console.log(nextUri);\n  console.log(get_options);\n  var state = resp.stats.state;\n  for (var i = 0; i < 8; i++) {\n    await sleep(4000);\n    try {\n      resp = await (await fetch(nextUri, get_options)).json();\n    } catch (e) {\n      console.log(e);\n    }\n    state = resp.stats.state;\n    console.log(resp);\n    if (state === \"FINISHING\") break;\n  }\n\n  const cols = resp.columns.map((col) => {\n    return col.name;\n  });\n  const result = {};\n  result[\"data\"] = resp.data.map((row) => {\n    return zip(cols, row);\n  });\n  result[\"cols\"] = cols.map((col) => {\n    return { title: col, field: col };\n  });\n  //console.log(result);\n  //  const resp = await fetch(url, options)\n  //    .then((response) => { return response.text(); })\n  //    .then((data) => { console.log(data);} )\n  //    .catch((error) => {console.log(error);} );\n  //  console.log(resp);\n  updateState(result.data, result.cols);\n  return result;\n}\n\n// extract a table column spec from array of recs\nfunction extractColumnSpec(data) {\n  return Object.keys(data[0]).map((x) => {\n    return { title: x, field: x };\n  });\n}\n\nclass App extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.spec = props.spec;\n    this.state0 = genStateStruct({}, props.spec.widgets);\n    this.state1 = genStateStruct({}, props.spec.widgets);\n    this.staging = this.state1;\n    this.state = this.state0;\n    console.log(this.state);\n  }\n\n  componentDidMount(){\n    this.spec.widgets.map((wspec) => {\n      if (\n        wspec.type === \"query\" &&\n        wspec.backend === \"urlfetch\" &&\n        wspec.fetch_on_init\n      ) {\n        this.runUrlFetchQuery(wspec.id);\n      }\n      return null;\n    });\n\n  }\n  handleTextChange(id, event) {\n    console.log(\"handleTextChange(\" + id + \"): \");\n    //console.log(this.state);\n    this.staging[id].value = event.target.value;\n  }\n\n  handleSelectChange(id, event) {\n    console.log(\"handleSelectChange(\" + id + \"): \");\n    //console.log(this.state);\n    this.staging[id].value = event.target.value;\n    this.setState(this.staging);\n  }\n  handleTabChange(id, event, newValue) {\n    console.log(\"handleTabChange(\" + id + \"): \");\n    //console.log(event);\n    //console.log(newValue);\n    //console.log(this.state);\n    this.state0[id].value = newValue;\n    this.state1[id].value = newValue;\n    let frag = {};\n    frag[id] =  this.staging[id];\n    if(this.staging===this.state0){\n        this.staging = this.state1;\n    } else {    \n        this.staging = this.state0;\n    }\n    this.setState(frag);\n    //this.setState(this.staging);\n  }\n\n  runPrestoQuery(qid) {\n    console.log(\"Run Presto Query: \" + qid);\n    prestoFetch(this.staging[qid].query, (data, cols) => {\n      this.staging[qid].data = data;\n      this.staging[qid].cols = cols;\n      console.log(this.staging);\n      this.setState(this.staging);\n    });\n  }\n  runNativeQuery(qid) {\n    // Extract the values for the endpoint query params\n    const args = [];\n    for (const a of this.staging[qid].args) {\n      //console.log(a);\n      args.push(this.staging[a.from].value);\n    }\n    const vars = {\n      endpoint: this.staging[qid].endpoint,\n      query: this.staging[qid].query,\n      args: JSON.stringify(args),\n    };\n    client.query({ query: data_query, variables: vars }).then((result) => {\n      console.log(result);\n      console.log(\"Before setting data: staging = \");\n      console.log(this.staging);\n      console.log(\"qid = \" + qid);\n      this.staging[qid].data = JSON.parse(result.data.getData.data);\n      // TODO: should be smart application of colspecs on the cols\n      this.staging[qid].cols = JSON.parse(result.data.getData.colstr);\n      console.log(\"Before setState: staging = \");\n      console.log(this.staging);\n      this.setState(this.staging);\n    });\n  }\n  runConstantQuery(qid) {\n    console.log(\"Run Constant Query: \" + qid);\n    this.staging[qid].data = this.staging[qid].query.data;\n    this.staging[qid].cols = this.staging[qid].query.cols;\n    console.log(this.staging);\n    this.setState(this.staging);\n  }\n\n  runUrlFetchQuery(qid) {\n    console.log(\"Run Url Fetch Query: \" + qid);\n    let url = this.staging[qid].query;\n    fetch(url)\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n        this.staging[qid].data = data;\n        this.staging[qid].cols = extractColumnSpec(data);\n        //console.log(this.staging);\n        this.setState(this.staging);\n      });\n  }\n\n  handleClick(id) {\n    console.log(\"handleClick(\" + id + \"): \");\n    const qid = this.staging[id].trigger;\n    switch (this.staging[qid].backend) {\n      case \"presto\":\n        this.runPrestoQuery(qid);\n        break;\n      case \"native\":\n        this.runNativeQuery(qid);\n        break;\n      case \"constant\":\n        this.runConstantQuery(qid);\n        break;\n      default:\n        console.log(\"Unrecognized backend: \" + this.staging[qid].backend);\n        break;\n    }\n  }\n  generateWidget(wspec) {\n\n    const callbacks = {\n      handleClick: (id) => this.handleClick(id),\n      handleTextChange: (id, event) => this.handleTextChange(id, event),\n      handleSelectChange: (id, event) => this.handleSelectChange(id, event),\n      handleTabChange: (id, event, newValue) => this.handleTabChange(id, event, newValue),\n      updateData: (id, d, c) => this.updateData(id, d, c),\n    };\n    return (<Widget key={\"widget_\" + wspec.id}\n            wspec={wspec} \n            callbacks={callbacks} \n            state={this.state} \n            widgets={this.spec.widgets}\n        />);\n  }\n\n  render() {\n    return (\n      <div className={{flexGrow: 1}} style={{ maxWidth: \"100%\" }}>\n        <Grid container spacing={5}\n            direction=\"row\"\n            alignContent='flex-start' \n            alignItems='center' justifyContent='flex-start'\n>\n          <ApolloProvider client={client}>\n            {this.spec.widgets.map((spec) => this.generateWidget(spec))}\n          </ApolloProvider>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { edu_data } from \"./data.js\";\n\n// text:\n//  - widths are in grid xs units\n//  - justify is passed to grid container justifyContent prop\nconst app_spec = {\n  widgets: [\n    {\n      type: \"image\",\n      id: \"img1\",\n      width: 4,\n      justify: \"center\",\n      value: \"https://lipyeow.github.io/home/img/lypic2018.jpg\",\n    },\n    {\n      type: \"text\",\n      id: \"txt2\",\n      width: 8,\n      justify: \"flex-start\",\n      value: `\n      <h1>Lipyeow Lim, Ph.D. &nbsp; &nbsp; &#26519;&#31435;&#32768; </h1>\n      <i>I am a computer scientist, educator, and software engineer by profession -- and a martial artist by avocation.</i>\n      \n      <br/>\n      <br/>\n      Fremont, CA, USA <br/>\n      <b>Email</b>: lipyeow at gmail dot com\n      <br/>\n      <b>LinkedIn</b>: \n      <a href=\"www.linkedin.com/in/lipyeowlim\">www.linkedin.com/in/lipyeowlim</a>\n      `,\n    },\n    {\n      type: \"tabcontainer\",\n      id: \"tabcontainer01\",\n      tabs: [\n        {\n          label: \"Software Engineer\",\n          id: \"tc01-0\",\n          idx: 0,\n          widgets: [\n            {\n              type: \"text\",\n              id: \"txt6\",\n              width: 12,\n              justify: \"flex-start\",\n              value: `\n                <i>My first serious software engineering endeavor was writing a\nlinux kernel module for supporting the PPP protocol over MobileIP back in 1998.\nI then progressed to prototyping various research ideas during my graduate\nstudies. My software engineering career really began at IBM developing advance\nfeatures for DB2 DBMS and Infosphere Streams software. I then took a break in\nacademia teaching students how to write data-intensive software applications as\nwell as advising developing nations on their IT projects as a World Bank\nconsultant. In 2019, I returned to industry (to FireEye Inc.) to lead\ndata-intensive cybersecurity software projects.</i>\n\n                <h2>Projects</h2>\n\n                <h2>Patents</h2>\n\n                <ul>\n                <li>A list of <a href=\"https://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=0&f=S&l=50&TERM1=Lipyeow&FIELD1=INNM&co1=AND&TERM2=Lim&FIELD2=INNM&d=PTXT\">my patents</a> at USPTO Patent Full-Text and Image Database. </li>\n\n                <li>\n                A list of <a href=\"https://appft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=0&f=S&l=50&TERM1=Lipyeow&FIELD1=IN&co1=AND&TERM2=Lim&FIELD2=IN&d=PG01\">my patent applications</a> at USPTO Patent Application Full-Text and Image Database. </li>\n                </ul>\n\n\n                `,\n            },\n\n\n          ],\n        },\n        {\n          label: \"Computer Scientist\",\n          id: \"tc01-1\",\n          idx: 1,\n          widgets: [\n            {\n              type: \"text\",\n              id: \"txt4\",\n              width: 12,\n              justify: \"flex-start\",\n              value: `\n                <i>My scientific research career started with my masters thesis \n                on pixel ordering in images. I then investigated the use of \n                machine learning techniques in optimizing database processing \n                in my doctoral dissertation. I continued with more general \n                data management research at the IBM Thomas J. Watson Research\n                Center early in my career before embarking on a professorship\n                at the University of Hawaii at Manoa.</i>\n\n                <h2>Education</h2>\n\n                <ul>\n                <li>2004 - Ph.D. Computer Science, Duke University. \n                    <br/>\n                    <ul>\n                    Thesis: <i>Online Methods for Database Optimization</i>.\n                    Advisor: Jeffrey Scott Vitter\n                    </ul>\n                </li>\n                <li>2000 - M.Sc. Information Systems & Computer Science, National University of Singapore. \n                    <br/>\n                    <ul>\n                    Thesis: <i>A Theoretical Look at Pixel Ordering</i>.\n                    Advisor: Philip M. Long\n                    </ul>\n                </li>\n                <li>1999 - B.Sc. Information Systems & Computer Science, National University of Singapore. \n                    <br/>\n                    <ul>\n                    Project: <i>Implementation of the mobile IPv4 configuration option for PPP IPCP (RFC 2290)</i>.\n                    Advisor: Yong-Chiang (Y.C.) Tay\n                    </ul>\n                </li>\n                </ul>\n\n                <h2>Publications</h2>\n                `,\n            },\n            {\n              type: \"table\",\n              id: \"tPub\",\n              label: <i>Scientific articles I have (co-)authored.</i>,\n              dataref: \"qPub\",\n              colspecs: [\n                { title: \"Year\", field: \"year\" },\n                { title: \"Venue\", field: \"venue\" },\n                { title: \"Title\", field: \"title\" },\n                { title: \"Authors\", field: \"authors\" },\n                {\n                  title: \"pdf\",\n                  field: \"pdf\",\n                  render: (rowData) => (\n                    <a\n                      href={\"https://lipyeow.github.io/home/\" + rowData.pdf}\n                      download\n                    >\n                      pdf\n                    </a>\n                  ),\n                },\n              ],\n              options: {\n                search: true,\n                paging: false,\n                filtering: false,\n                exportButton: true,\n                maxBodyHeight: \"50vh\",\n                tableLayout: \"auto\",\n              },\n            },\n          ],\n        },\n        {\n          label: \"Educator\",\n          id: \"tc01-2\",\n          idx: 2,\n          widgets: [\n            {\n              type: \"text\",\n              id: \"txt_educator\",\n              width: 12,\n              justify: \"flex-start\",\n              value: `\n      <i>Between 2009 and 2019, I was a professor of Information and Computer Science at the University of Hawaii at Manoa where I taught both undergraduate and graduate courses and advised Masters and Doctoral students.</i>\n      `,\n            },\n            {\n              type: \"table\",\n              id: \"tStu\",\n              label: (\n                <h2>Students</h2>\n              ),\n              dataref: \"qStu\",\n              colspecs: [\n                { title: \"Year\", field: \"year\" },\n                { title: \"Degree\", field: \"degree\" },\n                { title: \"Name\", field: \"name\" },\n                { title: \"Thesis\", field: \"thesis\" },\n              ],\n              options: {\n                search: true,\n                paging: false,\n                filtering: false,\n                exportButton: true,\n                maxBodyHeight: \"50vh\",\n                tableLayout: \"auto\",\n              },\n            },\n            {\n              type: \"table\",\n              id: \"tTeach\",\n              label: (\n                <h2>Courses</h2>\n              ),\n              dataref: \"qTeach\",\n              colspecs: [\n                { title: \"Year\", field: \"year\" },\n                { title: \"Semester\", field: \"semester\" },\n                { title: \"Course\", field: \"num\" },\n                { title: \"Title\", field: \"title\", defaultGroupOrder: 0 },\n                { title: \"Level\", field: \"level\" },\n                {\n                  title: \"Website\",\n                  field: \"url\",\n                  render: (rowData) => (\n                    <a href={rowData.url} download>\n                      {rowData.url}\n                    </a>\n                  ),\n                },\n              ],\n              options: {\n                search: true,\n                paging: false,\n                filtering: false,\n                exportButton: true,\n                maxBodyHeight: \"50vh\",\n                tableLayout: \"auto\",\n                grouping: true,\n              },\n            },\n          ],\n        },\n        {\n          label: \"Martial Artist\",\n          id: \"tc01-3\",\n          idx: 3,\n          widgets: [\n            {\n              type: \"text\",\n              id: \"txt_ma\",\n              width: 12,\n              justify: \"flex-start\",\n              value: `\n      <i>Chen Style Taijiquan</i>\n      <br/>\n      <i>I Liq Chuan</i>\n      <br/>\n      <i>Kalis Illustrissimo</i>\n      <br/>\n      `,\n            },\n          ],\n        },\n      ],\n    },\n    {\n      type: \"query\",\n      id: \"qPub\",\n      backend: \"urlfetch\",\n      endpoint: \"r0\",\n      query: \"https://lipyeow.github.io/test02/data/pubs.json\",\n      fetch_on_init: true,\n      args: [],\n    },\n    {\n      type: \"query\",\n      id: \"qEdu\",\n      backend: \"urlfetch\",\n      endpoint: \"r0\",\n      query: \"https://lipyeow.github.io/test02/data/education.json\",\n      fetch_on_init: false,\n      args: [],\n    },\n    {\n      type: \"query\",\n      id: \"qStu\",\n      backend: \"urlfetch\",\n      endpoint: \"r0\",\n      query: \"https://lipyeow.github.io/test02/data/students.json\",\n      fetch_on_init: true,\n      args: [],\n    },\n    {\n      type: \"query\",\n      id: \"qTeach\",\n      backend: \"urlfetch\",\n      endpoint: \"r0\",\n      query: \"https://lipyeow.github.io/test02/data/teaching.json\",\n      fetch_on_init: true,\n      args: [],\n    },\n    {\n      type: \"query\",\n      id: \"qEduConst\",\n      backend: \"constant\",\n      endpoint: \"r0\",\n      query: {\n        cols: [],\n        data: edu_data,\n      },\n      args: [],\n    },\n  ],\n};\n\nexport { app_spec };\n","\nconst edu_data = [\n{\n    \"year\": 2004,\n    \"month\": \"August\",\n    \"degree\": \"Ph.D.\",\n    \"major\": \"Computer Science\",\n    \"institution\": \"Duke University\",\n    \"sub-institution\": \"Department of Computer Science\",\n    \"thesis\": \"Online Methods for Database Optimization\",\n    \"advisor\": \"Jeffrey Scott Vitter\",\n    \"committee\": \"Min Wang, Ronald Parr, Jun Yang\",\n    \"gpa\": 3.9\n},\n{\n    \"year\": 2000,\n    \"month\": \"September\",\n    \"degree\": \"M.Sc.\",\n    \"major\": \"Information Systems & Computer Science\",\n    \"institution\": \"National University of Singapore\",\n    \"sub-institution\": \"School of Computing\",\n    \"thesis\": \"A Theoretical Look at Pixel Ordering\",\n    \"advisor\": \"Philip M. Long\",\n    \"committee\": \"Ghim-Hwee Ong, Wee-Sun Lee\",\n    \"gpa\": null\n},\n{\n    \"year\": 1999,\n    \"month\": \"May\",\n    \"degree\": \"B.Sc.\",\n    \"major\": \"Information Systems & Computer Science\",\n    \"institution\": \"National University of Singapore\",\n    \"sub-institution\": \"School of Computing\",\n    \"thesis\": \"Implementation of the mobile IPv4 configuration option for PPP IPCP (RFC 2290)\",\n    \"advisor\": \"Yong-Chiang (Y. C.) Tay\",\n    \"committee\": \"Kam-Hong Shum, Kwok-Yan Lam\",\n    \"gpa\": 3.5\n}\n];\n\nexport {edu_data, };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { ApolloClient, InMemoryCache, useQuery, gql } from '@apollo/client';\nimport { ApolloProvider } from '@apollo/client/react';\n\nimport { app_spec } from \"./appSpec\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <App spec={app_spec}/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}